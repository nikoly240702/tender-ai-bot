"""
–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã /start –∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é.
"""

from aiogram import Router, F
from aiogram.filters import CommandStart, Command
from aiogram.types import Message
from aiogram.fsm.context import FSMContext

from bot.keyboards import get_main_menu_keyboard
from bot.states import SearchStates

router = Router()


@router.message(CommandStart())
async def cmd_start(message: Message, state: FSMContext):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start.
    –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.
    """
    # –û—á–∏—â–∞–µ–º –ª—é–±–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    await state.clear()

    welcome_text = (
        "üëã <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Tender Sniper!</b>\n\n"
        "üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–µ–Ω–¥–µ—Ä–∞—Ö zakupki.gov.ru\n\n"
        "<b>–ß—Ç–æ —è —É–º–µ—é:</b>\n"
        "üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤—ã—Ö —Ç–µ–Ω–¥–µ—Ä–æ–≤ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)\n"
        "üéØ –£–º–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –≤–∞—à–∏–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ (scoring 0-100)\n"
        "üì± –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ç–µ–Ω–¥–µ—Ä–∞—Ö\n"
        "üíé –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π –∏ –ª–∏–º–∏—Ç–∞–º–∏\n"
        "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –∏ –∫–≤–æ—Ç\n\n"
        "<b>–í–∞—à —Ç–∞—Ä–∏—Ñ:</b> üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π\n"
        "‚Ä¢ 5 —Ñ–∏–ª—å—Ç—Ä–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\n"
        "‚Ä¢ 10 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å\n\n"
        "<i>–ù–∞–∂–º–∏—Ç–µ /sniper –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã!</i>"
    )

    from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üéØ –ó–∞–ø—É—Å—Ç–∏—Ç—å Tender Sniper", callback_data="sniper_menu")],
        [InlineKeyboardButton(text="‚ùì –ü–æ–º–æ—â—å", callback_data="sniper_help")]
    ])

    await message.answer(
        welcome_text,
        reply_markup=keyboard,
        parse_mode="HTML"
    )


@router.message(Command("help"))
@router.message(F.text == "‚ÑπÔ∏è –ü–æ–º–æ—â—å")
async def cmd_help(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help –∏ –∫–Ω–æ–ø–∫–∏ "–ü–æ–º–æ—â—å"."""

    help_text = (
        "<b>üìñ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º:</b>\n\n"
        "<b>1. –ù–æ–≤—ã–π –ø–æ–∏—Å–∫</b>\n"
        "‚Ä¢ –í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"–ø–æ—Å—Ç–∞–≤–∫–∞ –±—É–º–∞–≥–∏\")\n"
        "‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π\n"
        "‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–Ω–¥–µ—Ä–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞\n"
        "‚Ä¢ –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º\n\n"
        "<b>2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</b>\n"
        "‚Ä¢ –ù–∞–∂–º–∏—Ç–µ \"–ü–æ–¥—Ä–æ–±–Ω–µ–µ\" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π —Ç–µ–Ω–¥–µ—Ä–∞\n"
        "‚Ä¢ –ù–∞–∂–º–∏—Ç–µ \"–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å\" –¥–ª—è AI-–∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n"
        "‚Ä¢ –ü–æ–ª—É—á–∏—Ç–µ HTML-–æ—Ç—á–µ—Ç —Å –ø–æ–ª–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º\n\n"
        "<b>3. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–æ–≤</b>\n"
        "‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∞—à–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–∏—Å–∫–∏\n"
        "‚Ä¢ –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π\n\n"
        "<b>üí° –°–æ–≤–µ—Ç—ã:</b>\n"
        "‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (\"–ø–æ—Å—Ç–∞–≤–∫–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤\" –≤–º–µ—Å—Ç–æ \"–∫–æ–º–ø—å—é—Ç–µ—Ä—ã\")\n"
        "‚Ä¢ AI-–∞–Ω–∞–ª–∏–∑ –∑–∞–Ω–∏–º–∞–µ—Ç 1-2 –º–∏–Ω—É—Ç—ã –Ω–∞ —Ç–µ–Ω–¥–µ—Ä\n"
        "‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ç–µ–Ω–¥–µ—Ä—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –≤—Ä–µ–º–µ–Ω–∏\n\n"
        "<i>–í–æ–ø—Ä–æ—Å—ã? –ù–∞–ø–∏—à–∏—Ç–µ /start –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</i>"
    )

    await message.answer(help_text, parse_mode="HTML")


@router.message(F.text == "üîç –ù–æ–≤—ã–π –ø–æ–∏—Å–∫")
async def start_new_search(message: Message, state: FSMContext):
    """
    –ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.
    –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
    """
    await state.clear()
    await state.set_state(SearchStates.waiting_for_query)

    await message.answer(
        "üîç <b>–®–∞–≥ 1 –∏–∑ 3: –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</b>\n\n"
        "–í–≤–µ–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –∏—â–µ—Ç–µ:\n\n"
        "–ü—Ä–∏–º–µ—Ä—ã:\n"
        "‚Ä¢ –ø–æ—Å—Ç–∞–≤–∫–∞ –æ—Ñ–∏—Å–Ω–æ–π –±—É–º–∞–≥–∏\n"
        "‚Ä¢ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ\n"
        "‚Ä¢ —Ä–µ–º–æ–Ω—Ç –ø–æ–º–µ—â–µ–Ω–∏–π\n"
        "‚Ä¢ —É—Å–ª—É–≥–∏ —É–±–æ—Ä–∫–∏\n\n"
        "<i>üí° AI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—à–∏—Ä–∏—Ç –≤–∞—à –∑–∞–ø—Ä–æ—Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ –∏ —Å–º–µ–∂–Ω—ã–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏</i>",
        parse_mode="HTML"
    )


# –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–æ–≤ —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ bot/handlers/history.py
