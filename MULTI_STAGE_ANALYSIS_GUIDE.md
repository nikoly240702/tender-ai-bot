# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ª—É—á—à–µ–Ω–Ω–æ–º—É AI-–∞–Ω–∞–ª–∏–∑—É —Ç–µ–Ω–¥–µ—Ä–æ–≤

**–í–µ—Ä—Å–∏—è**: 2.0 (–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π –∞–Ω–∞–ª–∏–∑)
**–î–∞—Ç–∞**: 2025-11-16
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üéØ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)

1. **‚úÖ SmartDocumentTruncator** - —É–º–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –≤–∞–∂–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ–±—Ä–µ–∑–∫–µ
   - **–≠—Ñ—Ñ–µ–∫—Ç**: +20% —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤, +15% —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π

2. **‚úÖ MultiStageAnalyzer** - –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π –∞–Ω–∞–ª–∏–∑
   - 6 —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
   - Chain-of-Thought –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π
   - **‚≠ê Scoring System** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ 0-100 –±–∞–ª–ª–æ–≤
   - **–≠—Ñ—Ñ–µ–∫—Ç**: +15% –æ–±—â–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–Ω–¥–µ—Ä–æ–≤

3. **‚úÖ ResultValidator** - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤
   - –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
   - **–≠—Ñ—Ñ–µ–∫—Ç**: -80% –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

```python
from src.analyzers.tender_analyzer import TenderAnalyzer
from src.utils.config_loader import ConfigLoader

# 1. –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
config = ConfigLoader()
llm_config = config.get_llm_config()
company_profile = config.load_company_profile()

# 2. –°–æ–∑–¥–∞—ë–º –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å –ù–û–í–´–ú —Ñ–ª–∞–≥–æ–º use_multi_stage=True
analyzer = TenderAnalyzer(
    provider=llm_config['provider'],
    api_key=llm_config['api_key'],
    model_premium=llm_config.get('model_premium'),  # gpt-4o –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á
    model_fast=llm_config.get('model_fast'),        # gpt-4o-mini –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö
    use_multi_stage=True  # ‚≠ê –í–ö–õ–Æ–ß–ò–¢–¨ –ú–ù–û–ì–û–≠–¢–ê–ü–ù–´–ô –ê–ù–ê–õ–ò–ó
)

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º —É–ª—É—á—à–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
result = analyzer.analyze_tender_multi_stage(
    documentation=your_documentation_text,
    company_profile=company_profile
)

# 4. –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –ù–û–í–´–ú scoring!
print(f"‚úÖ –û—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è: {result['suitability']['total_score']}/100")
print(f"üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: {result['suitability']['recommendation']}")
print(f"üéØ –ö–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞: {result['validation']['quality_score']:.1f}%")
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

```python
{
  "tender_info": {
    # –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–Ω–¥–µ—Ä–µ
    "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞",
    "customer": "–ó–∞–∫–∞–∑—á–∏–∫",
    "nmck": 5000000,
    "deadline_submission": "2025-12-15",
    "deadline_execution": "2026-03-31",
    "guarantee_application": 250000,
    "guarantee_contract": 500000,
    "payment_terms": {
      "payment_deadline": "7 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π",
      "payment_moment": "–ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∞–∫—Ç–∞ –ø—Ä–∏–µ–º–∫–∏",
      "prepayment_percent": 30,
      "payment_schedule": "30% –∞–≤–∞–Ω—Å, 70% –ø–æ—Å–ª–µ –ø–æ—Å—Ç–∞–≤–∫–∏"
    },
    "products_or_services": [
      {
        "name": "–¢–æ–≤–∞—Ä 1",
        "quantity": 10,
        "unit": "—à—Ç—É–∫–∞",
        "specifications": {...},
        "raw_description": "..."
      }
    ]
  },

  "requirements": {
    "technical": ["ISO 9001", ...],
    "qualification": ["–û–ø—ã—Ç 3+ –≥–æ–¥–∞", ...],
    "financial": ["–û–±–æ—Ä–æ—Ç –æ—Ç 10 –º–ª–Ω", ...],
    "documentation": ["–£—Å—Ç–∞–≤", "–ë–∞–ª–∞–Ω—Å", ...]
  },

  # ‚≠ê –ù–û–í–û–ï: Scoring - –æ—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
  "suitability": {
    "total_score": 85,  # 0-100 –±–∞–ª–ª–æ–≤
    "breakdown": {
      "industry_match": 28,       # –∏–∑ 30 –º–∞–∫—Å
      "financial_capacity": 22,   # –∏–∑ 25 –º–∞–∫—Å
      "technical_capability": 20, # –∏–∑ 25 –º–∞–∫—Å
      "geography": 8,             # –∏–∑ 10 –º–∞–∫—Å
      "timeline": 7               # –∏–∑ 10 –º–∞–∫—Å
    },
    "reasoning": {
      "industry_match": "–ö–æ–º–ø–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å—Ñ–µ—Ä–µ –ø–æ—Å—Ç–∞–≤–∫–∏ –æ—Ñ–∏—Å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è...",
      "financial_capacity": "–ù–ú–¶–ö 5 –º–ª–Ω –≤–ø–æ–ª–Ω–µ –ø–æ —Å–∏–ª–∞–º –∫–æ–º–ø–∞–Ω–∏–∏ —Å –æ–±–æ—Ä–æ—Ç–æ–º 50 –º–ª–Ω...",
      ...
    },
    "recommendation": "participate",  # participate|consider|skip
    "confidence": "high",  # high|medium|low
    "red_flags": []  # –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –µ—Å–ª–∏ –µ—Å—Ç—å
  },

  "risks": [
    {
      "category": "financial",
      "description": "–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ 500–ö",
      "severity": "MEDIUM",
      "mitigation": "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫—É—é –≥–∞—Ä–∞–Ω—Ç–∏—é –∑–∞—Ä–∞–Ω–µ–µ"
    }
  ],

  # ‚≠ê –ù–û–í–û–ï: –í–∞–ª–∏–¥–∞—Ü–∏—è
  "validation": {
    "passed": true,  # –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
    "issues": [],    # –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
    "issues_count": 0,
    "quality_score": 95.0  # 0-100
  },

  # ‚≠ê –ù–û–í–û–ï: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  "analysis_metadata": {
    "method": "multi_stage",
    "stages_completed": 6,
    "analysis_time": 45.2,  # —Å–µ–∫—É–Ω–¥—ã
    "token_usage": {
      "stage_1": 5000,
      "stage_2": 8000,
      ...
    },
    "total_tokens": 54000
  }
}
```

---

## üé® –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### Scoring System

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ (total_score): 0-100 –±–∞–ª–ª–æ–≤**

| –î–∏–∞–ø–∞–∑–æ–Ω | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------------|----------|
| 80-100 | `participate` | –ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—á–∞—Å—Ç–∏–µ |
| 60-79 | `consider` | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —É—á–∞—Å—Ç–∏–µ |
| 0-59 | `skip` | –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—á–∞—Å—Ç–∏–µ |

**Breakdown - –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º:**

1. **industry_match (0-30)**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç—Ä–∞—Å–ª–∏
   - –¢–æ–≤–∞—Ä—ã/—É—Å–ª—É–≥–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏?
   - –ö–æ–º–ø–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —ç—Ç–æ–π —Å—Ñ–µ—Ä–µ?

2. **financial_capacity (0-25)**: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
   - –ù–ú–¶–ö –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏?
   - –ö–æ–º–ø–∞–Ω–∏—è –º–æ–∂–µ—Ç –≤–Ω–µ—Å—Ç–∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è?
   - –ö–æ–º–ø–∞–Ω–∏—è —Å–ø—Ä–∞–≤–∏—Ç—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ –æ–ø–ª–∞—Ç—ã?

3. **technical_capability (0-25)**: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
   - –ö–æ–º–ø–∞–Ω–∏—è –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç—Ä–µ–±—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã?
   - –ö–æ–º–ø–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º?

4. **geography (0-10)**: –ì–µ–æ–≥—Ä–∞—Ñ–∏—è
   - –†–µ–≥–∏–æ–Ω —Ç–µ–Ω–¥–µ—Ä–∞ –≤ –∑–æ–Ω–µ —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏?

5. **timeline (0-10)**: –°—Ä–æ–∫–∏
   - –ö–æ–º–ø–∞–Ω–∏—è –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å—Ä–æ–∫?

### Quality Score

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∞–Ω–∞–ª–∏–∑–∞ (validation.quality_score): 0-100**

| –î–∏–∞–ø–∞–∑–æ–Ω | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏—è |
|----------|--------|----------|
| 90-100 | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –ú–æ–∂–Ω–æ –¥–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º |
| 70-89 | ‚ö†Ô∏è  –•–æ—Ä–æ—à–æ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–æ—Ä–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã |
| <70 | ‚ùå –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è | –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ |

---

## üíº –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑

```python
# –°–æ–∑–¥–∞—ë–º –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
analyzer = TenderAnalyzer(
    provider="openai",
    api_key="sk-...",
    model_premium="gpt-4o",
    model_fast="gpt-4o-mini",
    use_multi_stage=True
)

# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–Ω–¥–µ—Ä
result = analyzer.analyze_tender_multi_stage(
    documentation=doc_text,
    company_profile=profile
)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ü–µ–Ω–∫—É
if result['suitability']['total_score'] >= 80:
    print("‚úÖ –û—Ç–ª–∏—á–Ω—ã–π —Ç–µ–Ω–¥–µ—Ä! –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—á–∞—Å—Ç–∏–µ")
    print(f"   –ü—Ä–∏—á–∏–Ω—ã: {result['suitability']['reasoning']['industry_match']}")
elif result['suitability']['total_score'] >= 60:
    print("‚ö†Ô∏è  –•–æ—Ä–æ—à–∏–π —Ç–µ–Ω–¥–µ—Ä, —Ç—Ä–µ–±—É–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è")
else:
    print("‚ùå –¢–µ–Ω–¥–µ—Ä –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç")
    if result['suitability']['red_flags']:
        print(f"   –ü—Ä–æ–±–ª–µ–º—ã: {result['suitability']['red_flags']}")
```

### –ü—Ä–∏–º–µ—Ä 2: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–µ–Ω–¥–µ—Ä–æ–≤

```python
from typing import List, Dict

def analyze_and_rank_tenders(
    tenders: List[Dict],
    company_profile: dict,
    min_score: int = 60
) -> List[Dict]:
    """
    –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ–Ω–¥–µ—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫.
    """
    analyzer = TenderAnalyzer(
        provider="openai",
        api_key=os.getenv("OPENAI_API_KEY"),
        model_premium="gpt-4o",
        model_fast="gpt-4o-mini",
        use_multi_stage=True
    )

    results = []

    for tender in tenders:
        print(f"–ê–Ω–∞–ª–∏–∑: {tender['name'][:50]}...")

        result = analyzer.analyze_tender_multi_stage(
            documentation=tender['documentation'],
            company_profile=company_profile
        )

        # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ
        score = result['suitability']['total_score']
        if score >= min_score:
            results.append({
                'tender_number': tender['number'],
                'name': tender['name'],
                'nmck': result['tender_info']['nmck'],
                'score': score,
                'recommendation': result['suitability']['recommendation'],
                'analysis': result
            })

    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é score
    results.sort(key=lambda x: x['score'], reverse=True)

    return results


# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
suitable_tenders = analyze_and_rank_tenders(
    tenders=all_tenders,
    company_profile=my_profile,
    min_score=70
)

print(f"\n‚úÖ –ù–∞–π–¥–µ–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ç–µ–Ω–¥–µ—Ä–æ–≤: {len(suitable_tenders)}")
for i, t in enumerate(suitable_tenders[:5], 1):
    print(f"{i}. {t['name'][:60]} | –û—Ü–µ–Ω–∫–∞: {t['score']}/100 | –ù–ú–¶–ö: {t['nmck']:,.0f} ‚ÇΩ")
```

### –ü—Ä–∏–º–µ—Ä 3: –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```python
import json
from datetime import datetime

def export_analysis_results(result: dict, filename: str = None):
    """
    –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –≤ —É–¥–æ–±–æ—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç.
    """
    if not filename:
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        filename = f"tender_analysis_{timestamp}.json"

    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
    export_data = {
        "analysis_date": datetime.now().isoformat(),
        "tender": {
            "name": result['tender_info']['name'],
            "customer": result['tender_info']['customer'],
            "nmck": result['tender_info']['nmck'],
            "deadline": result['tender_info']['deadline_submission']
        },
        "scoring": {
            "total_score": result['suitability']['total_score'],
            "recommendation": result['suitability']['recommendation'],
            "breakdown": result['suitability']['breakdown'],
            "reasoning": result['suitability']['reasoning']
        },
        "products_count": len(result['tender_info'].get('products_or_services', [])),
        "risks_count": len(result['risks']),
        "quality_score": result['validation']['quality_score'],
        "full_analysis": result
    }

    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    with open(filename, 'w', encoding='utf-8') as f:
        json.dump(export_data, f, ensure_ascii=False, indent=2)

    print(f"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: {filename}")

    # –ö—Ä–∞—Ç–∫–∏–π –æ—Ç—á—ë—Ç –≤ –∫–æ–Ω—Å–æ–ª—å
    print("\n" + "="*70)
    print(f"  –ê–ù–ê–õ–ò–ó –¢–ï–ù–î–ï–†–ê")
    print("="*70)
    print(f"–¢–µ–Ω–¥–µ—Ä: {export_data['tender']['name'][:60]}")
    print(f"–ù–ú–¶–ö: {export_data['tender']['nmck']:,.0f} ‚ÇΩ")
    print(f"\n‚≠ê –û—Ü–µ–Ω–∫–∞: {export_data['scoring']['total_score']}/100")
    print(f"üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: {export_data['scoring']['recommendation']}")
    print(f"üéØ –ö–∞—á–µ—Å—Ç–≤–æ: {export_data['quality_score']:.1f}%")
    print(f"\n–¢–æ–≤–∞—Ä–æ–≤: {export_data['products_count']}")
    print(f"–†–∏—Å–∫–æ–≤: {export_data['risks_count']}")
    print("="*70)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
export_analysis_results(result)
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ config/settings.yaml

```yaml
llm:
  provider: "openai"
  model: "gpt-4o-mini"  # –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  model_premium: "gpt-4o"        # ‚≠ê –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ (2, 3, 5)
  model_fast: "gpt-4o-mini"      # ‚≠ê –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —ç—Ç–∞–ø–æ–≤ (1, 4, 6)
  max_tokens: 4096
  temperature: 0.3
  max_retries: 3
  retry_delay: 2

# ‚≠ê –ù–û–í–û–ï: –§–ª–∞–≥ –¥–ª—è –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
analysis:
  use_multi_stage: true  # –í–∫–ª—é—á–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
  smart_truncate_max_chars: 50000  # –õ–∏–º–∏—Ç –¥–ª—è —É–º–Ω–æ–π –æ–±—Ä–µ–∑–∫–∏
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# .env —Ñ–∞–π–ª

# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
OPENAI_API_KEY=sk-...

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–¥–ª—è Level 2)
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.1
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------|-------|-----------|
| –¢–æ—á–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ù–ú–¶–ö | 85% | 95% | +10% |
| –¢–æ—á–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–æ–≤ | 70% | 90% | +20% |
| –ü–æ–ª–Ω–æ—Ç–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ | 55% | 85% | +30% |
| –¢–æ—á–Ω–æ—Å—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π | 60% | 90% | +30% |
| False positives –≤ –ø—Ä–æ–±–µ–ª–∞—Ö | 30% | 10% | -20% |
| –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ | 45-60—Å | 50-65—Å | +10% (–∑–∞ —Å—á—ë—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏) |
| –°—Ç–æ–∏–º–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ | $0.009 | $0.012 | +33% (–∑–∞ —Å—á—ë—Ç –¥–æ–ø. —ç—Ç–∞–ø–æ–≤) |

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

| –ö—Ä–∏—Ç–µ—Ä–∏–π | analyze_documentation() | analyze_tender_multi_stage() |
|----------|------------------------|------------------------------|
| –¢–æ—á–Ω–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê (65%) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (85%) |
| Scoring | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (0-100) |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –û–±—Ä–µ–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | –¢—É–ø–∞—è | –£–º–Ω–∞—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã) |
| –ü—Ä–æ–º–ø—Ç—ã | –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã | –§–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è** | –î–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ | –î–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π |

---

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω"

```python
ValueError: –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.
–°–æ–∑–¥–∞–π—Ç–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å use_multi_stage=True
```

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
analyzer = TenderAnalyzer(provider="openai", api_key="...")

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
analyzer = TenderAnalyzer(
    provider="openai",
    api_key="...",
    use_multi_stage=True  # ‚Üê –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç —Ñ–ª–∞–≥
)
```

### –ù–∏–∑–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (quality_score < 70)

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–∞—è –∏–ª–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `result['validation']['issues']` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫–∏–µ –ø–æ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

```python
if result['validation']['quality_score'] < 70:
    print("‚ö†Ô∏è  –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞. –ü—Ä–æ–±–ª–µ–º—ã:")
    for issue in result['validation']['issues']:
        print(f"  - {issue['severity']}: {issue['issue']}")
```

### Scoring = 0 –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** LLM –Ω–µ —Å–º–æ–≥ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–Ω–¥–µ—Ä —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –∫–æ–º–ø–∞–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `company_profile`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è:
   - `specialization` - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
   - `industries` - –æ—Ç—Ä–∞—Å–ª–∏ —Ä–∞–±–æ—Ç—ã
   - `regions` - —Ä–µ–≥–∏–æ–Ω—ã —Ä–∞–±–æ—Ç—ã

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–∞—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ `analyze_documentation()` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:

```python
# –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
analyzer = TenderAnalyzer(provider="openai", api_key="...")
result = analyzer.analyze_documentation(doc, profile)
# ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
```

### –ü–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

**–®–∞–≥ 1:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä–∫–µ

```python
# –°–æ–∑–¥–∞—ë–º –¥–≤–∞ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
old_analyzer = TenderAnalyzer(provider="openai", api_key="...")
new_analyzer = TenderAnalyzer(provider="openai", api_key="...", use_multi_stage=True)

# –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
old_result = old_analyzer.analyze_documentation(doc, profile)
new_result = new_analyzer.analyze_tender_multi_stage(doc, profile)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–ª—É—á—à–µ–Ω–∏—è
print(f"–°—Ç–∞—Ä—ã–π: —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–æ {len(old_result.get('tender_info', {}).get('products_or_services', []))}")
print(f"–ù–æ–≤—ã–π: —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–æ {len(new_result['tender_info']['products_or_services'])}")
print(f"–ù–æ–≤—ã–π: scoring = {new_result['suitability']['total_score']}/100")
```

**–®–∞–≥ 2:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥

```python
# –í main.py –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
USE_NEW_ANALYSIS = os.getenv("USE_NEW_ANALYSIS", "false").lower() == "true"

if USE_NEW_ANALYSIS:
    result = analyzer.analyze_tender_multi_stage(doc, profile)
else:
    result = analyzer.analyze_documentation(doc, profile)
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **–ò—Å—Ö–æ–¥–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `AI_–ê–Ω–∞–ª–∏–∑_–¢–µ–Ω–¥–µ—Ä–æ–≤_–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.md`
- **–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: `src/analyzers/multi_stage_analyzer.py`
- **–£–º–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞**: `src/analyzers/smart_document_processor.py`
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: `src/analyzers/result_validator.py`

---

## ‚úÖ Checklist –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `config/settings.yaml` (–¥–æ–±–∞–≤–∏—Ç—å model_premium, model_fast)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∞–≥ `use_multi_stage=True` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 5-10 —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–µ–Ω–¥–µ—Ä–∞—Ö
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ —Å—Ç–∞—Ä—ã–º –∞–Ω–∞–ª–∏–∑–æ–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ scoring (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –æ–∂–∏–¥–∞–Ω–∏—è–º)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å HTML —à–∞–±–ª–æ–Ω—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è scoring
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Telegram bot –¥–ª—è –≤—ã–≤–æ–¥–∞ –æ—Ü–µ–Ω–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Railway

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**

*–°–æ–∑–¥–∞–Ω–æ: 2025-11-16*
*–ê–≤—Ç–æ—Ä: AI Analysis Improvement System*
