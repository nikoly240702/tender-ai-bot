# ИИ-Агент для анализа тендеров (MVP)

Автоматизированный анализ тендерной документации с использованием Claude AI. Система выявляет пробелы в документации, генерирует вопросы для заказчика, рассчитывает финансовую привлекательность и дает обоснованную рекомендацию по участию.

## Возможности

- **Извлечение текста** из PDF и DOCX документов
- **Анализ документации** через Claude Sonnet 4
- **Детекция пробелов** и недостающей информации
- **Генерация вопросов** для заказчика с приоритетами
- **Извлечение контактов** (email, телефоны)
- **Финансовый анализ** (себестоимость, маржа, ROI, обеспечение)
- **Скоринг тендера** по 4 критериям (0-100 баллов)
- **Рекомендация** по участию (УЧАСТВОВАТЬ / УТОЧНИТЬ / ОТКАЗАТЬСЯ)
- **Отчеты** в форматах HTML, JSON и Markdown

## Установка

### 1. Клонирование репозитория

```bash
cd tender-ai-agent
```

### 2. Создание виртуального окружения (рекомендуется)

```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Настройка API ключа Anthropic

Создайте файл `.env` в корне проекта:

```bash
cp .env.example .env
```

Отредактируйте `.env` и укажите ваш API ключ:

```
ANTHROPIC_API_KEY=your-api-key-here
```

**Как получить API ключ:**
1. Зарегистрируйтесь на https://console.anthropic.com/
2. Перейдите в раздел API Keys
3. Создайте новый ключ
4. Скопируйте и вставьте в `.env`

### 5. Настройка профиля компании

Отредактируйте `config/company_profile.yaml` под вашу компанию:

```yaml
company_info:
  name: "Ваша компания"
  inn: "1234567890"

capabilities:
  categories:
    - "Ваша специализация 1"
    - "Ваша специализация 2"

financial:
  cost_structure:
    labor_cost_per_hour: 2000  # Ваша стоимость часа
    overhead_coefficient: 1.3   # Коэффициент накладных
    profit_margin_target: 0.25  # Целевая маржа
```

## Использование

### Базовый запуск

```bash
python main.py документ.pdf
```

### Анализ нескольких файлов

```bash
python main.py doc1.pdf doc2.docx спецификация.pdf
```

### Анализ всех файлов в директории

```bash
python main.py --path /path/to/tender/docs/
```

### Без автоматического открытия в браузере

```bash
python main.py документ.pdf --no-browser
```

## Структура проекта

```
tender-ai-agent/
├── config/
│   ├── company_profile.yaml   # Профиль вашей компании
│   └── settings.yaml           # Системные настройки
├── src/
│   ├── document_processor/     # Извлечение текста из PDF/DOCX
│   ├── analyzers/              # Интеграция с Claude API
│   ├── communication/          # Контакты и вопросы
│   ├── scoring/                # Финансы и скоринг
│   ├── reporting/              # Генерация отчетов
│   └── utils/                  # Вспомогательные утилиты
├── data/tenders/               # Папка для тендерных документов
├── output/reports/             # Сгенерированные отчеты
├── main.py                     # Главный файл запуска
├── requirements.txt            # Зависимости Python
└── README.md                   # Этот файл
```

## Workflow анализа

1. **Извлечение текста** — текст из PDF и DOCX документов
2. **Анализ через Claude** — определение ключевых параметров тендера
3. **Детекция пробелов** — выявление недостающей информации
4. **Генерация вопросов** — формирование вопросов для заказчика
5. **Извлечение контактов** — поиск email и телефонов
6. **Финансовый расчет** — себестоимость, маржа, обеспечение
7. **Скоринг** — оценка по 4 критериям + итоговый балл
8. **Отчеты** — генерация HTML, JSON и Markdown

## Результаты анализа

### Консольный вывод

```
============================================================
  РЕЗУЛЬТАТЫ АНАЛИЗА
============================================================

Тендер: Поставка компьютерного оборудования
Заказчик: ООО "Заказчик"
НМЦК: 5,000,000 руб.

Итоговая оценка: 75/100
Готовность: 70%

Рекомендация: УТОЧНИТЬ
Требуется уточнение информации у заказчика. Выявлено пробелов:
0 критичных, 3 важных.

Выявлено пробелов:
  Критичных: 0
  Важных: 3
  Средних: 5
  Низких: 2
```

### HTML отчет

Красивый интерактивный отчет с:
- Итоговой оценкой (цветная карточка)
- Прогресс-барами по каждому критерию
- Финансовым анализом (таблица)
- Списком пробелов с цветовой кодировкой
- Готовыми вопросами для заказчика
- Контактами заказчика

Автоматически открывается в браузере после завершения анализа.

### JSON отчет

Машиночитаемый формат для программной обработки:

```json
{
  "tender_info": {...},
  "score": {...},
  "financial_analysis": {...},
  "gaps": [...],
  "questions": {...}
}
```

### Markdown отчет

Текстовый формат для чтения в редакторах.

## Скоринг тендера

Система оценивает тендер по 4 критериям:

| Критерий | Вес | Описание |
|----------|-----|----------|
| **Техническое соответствие** | 30% | Соответствие требованиям и компетенциям |
| **Финансовая привлекательность** | 30% | Маржа, ROI, рентабельность |
| **Полнота информации** | 25% | Количество и критичность пробелов |
| **Соответствие компетенциям** | 15% | Наличие сертификатов, региональное покрытие |

**Итоговый балл**: взвешенное среднее 0-100

**Готовность к участию**: 0-100% (учитывает критичные пробелы)

**Рекомендация**:
- **УЧАСТВОВАТЬ** — балл ≥60, готовность ≥70%, ≤2 критичных пробелов
- **УТОЧНИТЬ** — балл ≥50, готовность ≥50%, есть важные вопросы
- **ОТКАЗАТЬСЯ** — низкий балл или >2 критичных пробелов

## Настройка

### Веса критериев скоринга

В `config/company_profile.yaml`:

```yaml
scoring_weights:
  technical_fit: 0.30
  financial_attractiveness: 0.30
  information_completeness: 0.25
  competence_match: 0.15
```

### Пороговые значения

```yaml
thresholds:
  min_margin_percent: 15       # Минимальная маржа
  min_total_score: 60          # Минимальный балл
  max_critical_gaps: 2         # Макс. критичных пробелов
  min_readiness_percent: 70    # Минимальная готовность
```

### Модель Claude

В `config/settings.yaml`:

```yaml
claude:
  model: "claude-sonnet-4-20250514"
  max_tokens: 4096
  temperature: 0.3
  max_retries: 3
```

## FAQ

### Какие форматы документов поддерживаются?

- PDF (.pdf)
- Microsoft Word (.docx, .doc)

### Сколько времени занимает анализ?

Обычно 2-5 минут в зависимости от объема документации.

### Можно ли анализировать несколько файлов одновременно?

Да, система объединяет текст из всех файлов для комплексного анализа.

### Что делать, если API ключ не работает?

1. Проверьте правильность ключа в `.env`
2. Убедитесь, что на аккаунте есть кредиты
3. Проверьте лимиты API на https://console.anthropic.com/

### Как изменить целевую маржу?

Отредактируйте `config/company_profile.yaml`:
```yaml
financial:
  cost_structure:
    profit_margin_target: 0.30  # 30%
```

### Можно ли экспортировать вопросы для письма?

Да, в HTML отчете можно скопировать готовые вопросы. Также можно использовать TemplateGenerator для генерации полного текста письма.

### Где хранятся отчеты?

В директории `output/reports/`. Имя файла содержит название тендера и timestamp.

### Как интерпретировать уровни критичности пробелов?

- **CRITICAL** — без этой информации нельзя подать заявку
- **HIGH** — важная информация, влияет на решение
- **MEDIUM** — желательно уточнить
- **LOW** — некритично

## Ограничения MVP

- CLI интерфейс (нет GUI)
- Обработка одного тендера за раз
- Ручная загрузка файлов
- Базовая детекция контактов (regex)
- Упрощенный финансовый расчет

## Roadmap (будущие версии)

### Фаза 2
- Web-интерфейс
- Автоматический мониторинг площадок (ЕИС, Сбербанк-АСТ)
- База данных для истории анализа
- API для интеграции

### Фаза 3
- Автоматическая подготовка заявки
- Интеграция с CRM
- Многопользовательский режим
- Расширенная аналитика

## Требования

- Python 3.10+
- API ключ Anthropic Claude
- ~100 МБ свободного места
- Интернет-соединение

## Лицензия

MIT

## Поддержка

По вопросам и предложениям создавайте Issues в репозитории.

---

**Разработано с использованием Claude Sonnet 4**
